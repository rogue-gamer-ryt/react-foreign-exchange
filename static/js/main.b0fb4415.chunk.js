(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,a,t){e.exports=t(41)},27:function(e,a,t){},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(6),l=t.n(c),o=(t(27),t(1)),s=t(7),u=t(8),i=t(13),p=t(10),h=t(12),g=t(4),d=(t(32),t(33),function(e){return n.a.createElement("button",{className:"toggle-button",onClick:e.click},n.a.createElement("div",{className:"toggle-button__line"}),n.a.createElement("div",{className:"toggle-button__line"}),n.a.createElement("div",{className:"toggle-button__line"}))}),m=(t(34),function(e){return n.a.createElement("header",{className:"toolbar"},n.a.createElement("nav",{className:"toolbar_navigation"},n.a.createElement("div",{className:"toolbar_toggle-button"},n.a.createElement(d,{click:e.drawerClickHandler})),n.a.createElement("div",{className:"toolbar_logo"},n.a.createElement("a",{href:"/"},"Foreign exchange")),n.a.createElement("div",{className:"toolbar_navigation_items"},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Home")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"About Us")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Contact Us"))))))});function f(e){return function(a){fetch("https://api.exchangeratesapi.io/latest?base="+e).then(function(e){return e.json()}).then(function(e){a({type:"FETCH_DONE",payload:e})}).catch(function(e){a({type:"FETCH_FAIL",payoad:e})})}}function D(e,a){return function(t){fetch("https://api.exchangeratesapi.io/history?start_at="+a+"&end_at="+a+"&base="+e).then(function(e){return e.json()}).then(function(e){t({type:"FETCH_DONE_OLD_RATES",payload:e})}).catch(function(e){t({type:"FETCH_FAIL_OLD_RATES",payoad:e})})}}t(35);var E=function(e){var a="side-drawer";return e.show&&(a="side-drawer open"),n.a.createElement("nav",{className:a},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Home")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"About Us")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Contact Us"))))},y=(t(36),function(e){return n.a.createElement("div",{className:"backdrop",onClick:e.click})}),v=t(11),C=t(21);t(37);function N(e){var a=function(a){a.preventDefault(),e.handlePageChange(a.target.id)};return n.a.createElement("div",null,n.a.createElement("div",{className:"pagination"},n.a.createElement("a",{href:"#",onClick:function(a){var t;a.preventDefault(),1!=e.currPageNum&&(t=parseInt(e.currPageNum)-1,e.handlePageChange(t))},className:1==e.currPageNum?"pagination-arrow arrow-disable":"pagination-arrow"},"\u276e\xa0"),function(){console.log("createPagination: ",e);for(var t=e.totalCount,r=e.countPerPage,c=Math.ceil(t/r),l=[],o=1;o<=c;o++)l.push(n.a.createElement("a",{className:e.currPageNum==o?"active-page":"inactive-page",onClick:a,id:o,key:o},o));return l}(),n.a.createElement("a",{href:"#",onClick:function(a){var t;a.preventDefault();var r=e.totalCount,n=e.countPerPage;console.log("PAGINATION NEXT: ",r,n);var c=Math.ceil(r/n);e.currPageNum!=c&&(console.log("PAGINATION CURRENT PAGE NUM",e.currPageNum),t=parseInt(e.currPageNum)+1,console.log("PAGINATION NXT PAGE NUM",t),e.handlePageChange(t))},className:e.currPageNum==Math.ceil(e.totalCount/e.countPerPage)?"pagination-arrow arrow-disable":"pagination-arrow"},"\xa0\u276f")))}t(38);var O=function(e){return function(a){a({type:"SET_ALL_DATA",payload:e})}},b=function(e){return function(a){a({type:"SET_TOTAL_COUNT",payload:e})}},P=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(p.a)(a).call(this,e))).handlePageChange=function(e){t.props.setPageNo(e)},t.setTableData=function(e){console.log("setTableData: ",e);var a=[],r=Object(C.a)(t.props.paginationData.allData),n=e*t.props.paginationData.countPerPage,c=(e-1)*t.props.paginationData.countPerPage;n<r.length?a=r.slice(c,n):n>=r.length&&(a=r.slice(c)),t.props.setCurrentData(a),console.log("Printing props in setTableData: ",t.props)},t.tableGenerator=function(){console.log("tableGenerator"),console.log(t.props.currData);var e=[];if(t.props.paginationData.currPageData.length>0&&t.props.currData.resultOldData){var a=t.props.currData.result.base,r=t.props.paginationData.currPageData,c=t.props.currData.resultOldData.rates;c=c[Object.keys(c)[0]],console.log("rates "+r+"base "+a),r.forEach(function(a){e.push(n.a.createElement("div",{key:a.currencyName,className:"tableRow"},n.a.createElement("span",{className:"currName"},a.currencyName),n.a.createElement("span",{className:"currRate"},a.currencyValue.toFixed(5)),n.a.createElement("span",{className:"curr-diff"},a.currencyValue-c[a.currencyName]>0?"+"+(a.currencyValue-c[a.currencyName]).toFixed(5):+(a.currencyValue-c[a.currencyName]).toFixed(5))))})}else e=n.a.createElement("div",{className:"tableRow"},n.a.createElement("span",{className:"currName"},"No Data"));return e},t}return Object(h.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.currData.result&&Object.keys(this.props.currData.result.rates).length>0&&this.parseObjectToArray(this.props.paginationData.selectedCurrency)}},{key:"componentDidUpdate",value:function(e,a){e.paginationData.selectedCurrency===this.props.paginationData.selectedCurrency&&e.currData.result===this.props.currData.result||this.parseObjectToArray(this.props.paginationData.selectedCurrency),e.paginationData.allData===this.props.paginationData.allData&&e.paginationData.currPageNum===this.props.paginationData.currPageNum||this.setTableData(this.props.paginationData.currPageNum)}},{key:"parseObjectToArray",value:function(e){for(var a=this.props.currData.result.rates,t=[],r=0,n=Object.entries(a);r<n.length;r++){var c=n[r],l=Object(v.a)(c,2),o=l[0],s=l[1];o!==e&&t.push({currencyName:o,currencyValue:s})}this.props.setTotalCount(t.length),this.props.setAllData(t),this.props.setCopyAllData(t)}},{key:"render",value:function(){return console.log("Props: ",this.props),n.a.createElement("div",null,n.a.createElement("div",{className:"table-container"},this.tableGenerator()),n.a.createElement("div",null,n.a.createElement(N,{totalCount:this.props.paginationData.allData.length,countPerPage:this.props.paginationData.countPerPage,handlePageChange:this.handlePageChange,currPageNum:this.props.paginationData.currPageNum})))}}]),a}(n.a.Component),A=Object(g.b)(function(e){return Object(o.a)({},e)},function(e){return{fetchCurrRates:function(a){return e(f(a))},fetchCurrRatesOld:function(a){return e(D(a))},setTotalCount:function(a){return e(b(a))},setPageNo:function(a){return e((t=a,function(e){e({type:"SET_PAGE_NO",payload:t})}));var t},setCurrentData:function(a){return e((t=a,function(e){e({type:"SET_CURRENT_DATA",payload:t})}));var t},setAllData:function(a){return e(O(a))},setCopyAllData:function(a){return e((t=a,function(e){e({type:"SET_COPY_ALL_DATA",payload:t})}));var t}}})(P),T=(t(39),function(e){var a=new Date(e);a.setDate(a.getDate()-1);var t=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),n=a.getFullYear();return a=n+"-"+r+"-"+t});function _(e){return n.a.createElement("div",{className:"dropDown"},n.a.createElement("select",{className:"dropbtn",value:e.selectedCurrency,onChange:function(a){if(a.preventDefault(),e.setCurrency(a.target.value),e.date)var t=T(e.date);e.fetchCurrRatesOld(a.target.value,t)}},function(){console.log("Calling getOptions: ",e);var a=[];if(e.result&&Object.keys(e.result.rates)){var t=e.result.rates;for(var r in t)a.push(n.a.createElement("option",{key:r,value:r},r))}else a=null;return a}()))}t(40);function j(e){var a=Object(r.createRef)(),t=function(a){for(var t=e.result.rates,r=[],n=0,c=Object.entries(t);n<c.length;n++){var l=c[n],o=Object(v.a)(l,2),s=o[0],u=o[1];s!==a&&r.push({currencyName:s,currencyValue:u})}e.setTotalCount(r.length),e.setAllData(r)};return n.a.createElement("div",{className:"searchbar"},n.a.createElement("input",{type:"text",ref:a,onChange:function(r){var n=[];a.current.value=r.target.value,r.target.value.length>0?(e.copyAllData.forEach(function(e){e.currencyName.search(r.target.value)>-1&&n.push(e)}),e.setAllData(n)):t(e.selectedCurrency)},className:"search-text-input",placeholder:"Search by currency...."}),n.a.createElement("i",{className:"fas fa-search"}))}var w=function(e){function a(){var e,t;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(n)))).state={sideDrawerOpen:!1},t.drawerToggleClickHandler=function(){t.setState(function(e){return{sideDrawerOpen:!e.sideDrawerOpen}})},t.backdropClickHandler=function(){t.setState({sideDrawerOpen:!1})},t.simpleAction=function(e){t.props.simpleAction()},t}return Object(h.a)(a,e),Object(u.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.props.setCurrency("JPY");var a=setInterval(function(){e.props.currData.result&&""!==e.props.currData.result&&(e.props.fetchCurrRatesOld("JPY",T(e.props.currData.result.date)),clearInterval(a))},200)}},{key:"render",value:function(){var e;return this.state.sideDrawerOpen&&(e=n.a.createElement(y,{click:this.backdropClickHandler})),n.a.createElement("div",{className:"App"},n.a.createElement(m,{drawerClickHandler:this.drawerToggleClickHandler}),n.a.createElement(E,{show:this.state.sideDrawerOpen}),e,n.a.createElement("div",{className:"AppBody"},n.a.createElement("div",{className:"tableOperations"},n.a.createElement(_,{selectedCurrency:this.props.paginationData.selectedCurrency,setCurrency:this.props.setCurrency,result:this.props.currData.result,fetchCurrRates:this.props.fetchCurrRates,fetchCurrRatesOld:this.props.fetchCurrRatesOld,date:this.props.currData.result?this.props.currData.result.date:""}),n.a.createElement(j,{selectedCurrency:this.props.paginationData.selectedCurrency,setTotalCount:this.props.setTotalCount,result:this.props.currData.result,setAllData:this.props.setAllData,allData:this.props.paginationData.allData,copyAllData:this.props.paginationData.copyAllData})),n.a.createElement(A,{currRate:this.props.fetchCurrRates,oldRate:this.props.fetchCurrRatesOld})))}}]),a}(n.a.Component),k=Object(g.b)(function(e){return Object(o.a)({},e)},function(e){return{simpleAction:function(){return e(function(e){e({type:"SIMPLE_ACTION",payload:"result_of_simple_action"})})},setCurrency:function(a){var t;e(f(a)),e((t=a,function(e){e({type:"SET_CURRENCY",payload:t})}))},setTotalCount:function(a){e(b(a))},setAllData:function(a){e(O(a))},fetchCurrRatesOld:function(a,t){e(D(a,t))}}})(w);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=t(2),S=t(20),L=Object(R.c)({currData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{result:null,resultOldData:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIMPLE_ACTION":return{result:a.payload};case"FETCH_DONE":return Object(o.a)({},e,{result:a.payload});case"FETCH_FAIL":return{result:a.payload};case"FETCH_DONE_OLD_RATES":return Object(o.a)({},e,{resultOldData:a.payload});case"FETCH_FAIL_OLD_RATES":return{resultOldData:a.payload};default:return e}},paginationData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currPageNum:1,currPageData:[],allData:[],selectedCurrency:"JPY",countPerPage:8},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_PAGE_NO":return Object(o.a)({},e,{currPageNum:a.payload});case"SET_CURRENT_DATA":return Object(o.a)({},e,{currPageData:a.payload});case"SET_ALL_DATA":return Object(o.a)({},e,{allData:a.payload});case"SET_TOTAL_COUNT":return Object(o.a)({},e,{totalCount:a.payload});case"SET_COUNT_PER_PAGE":return Object(o.a)({},e,{countPerPage:a.payload});case"SET_CURRENCY":return Object(o.a)({},e,{selectedCurrency:a.payload});case"SET_COPY_ALL_DATA":return Object(o.a)({},e,{copyAllData:a.payload});default:return e}}});l.a.render(n.a.createElement(g.a,{store:Object(R.d)(L,Object(R.a)(S.a))},n.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.b0fb4415.chunk.js.map